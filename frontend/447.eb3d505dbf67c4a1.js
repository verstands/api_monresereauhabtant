"use strict";(self.webpackChunkafricauniontechfront=self.webpackChunkafricauniontechfront||[]).push([[447],{6396:(w,h,o)=>{o.r(h),o.d(h,{MainAppModule:()=>H});var p=o(9808),r=o(1598),u=o(8924),Z=o(8613),e=o(4893),d=o(801);class O{}var v=o(7111),g=o(8186),M=o(7053),m=o(2308),f=o(2846),C=o(9444),c=o(2382);let S=(()=>{class t{constructor(n,s,a){this.authService=n,this.dialog=s,this.appConfig=a,this.faTimes=d.NBC,this.faEye=d.Mdf,this.faEyeSlash=d.Aq,this.updatePassword=new O,this.passView=!0,this.typing=!0,this.typingPass=!0,this.message=""}ngOnInit(){}toggleView(){this.passView=!this.passView}onTyping(){this.typing=!1}onTypingPass(){this.typingPass=!1}update(){try{if(!this.updatePassword.oldPassword||this.updatePassword.oldPassword.length<=0)throw new Error("Veuillez renseigner l'ancien mot de passe");if(!this.updatePassword.newPassword||this.updatePassword.newPassword.length<=0)throw new Error("Veuillez renseigner le nouveau mot de passe");if(this.updatePassword.newPassword.length<8)throw new Error("Le nouveau mot de passe doit avoir au moins 8 caract\xe8res");this.message="",this.appConfig.onStartWaiting(),this.authService.updatePassword(this.updatePassword).subscribe({next:n=>{this.appConfig.onStopWaiting(),"400"==n.status.code?g.H.openInfoDialog(this.dialog,n.status.message):"500"==n.status.code?g.H.openInfoDialog(this.dialog,v.G.NETWORK_ERROR):(g.H.openInfoDialog(this.dialog,"Mot de passe modifi\xe9 avec succ\xe8s"),this.dialog.closeAll())},error:n=>{this.appConfig.onStopWaiting(),g.H.openInfoDialog(this.dialog,v.G.NETWORK_ERROR)}})}catch(n){this.message=n.message}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(M.$),e.Y36(m.uw),e.Y36(f._))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-update-password"]],decls:32,vars:8,consts:[[1,"text-end","mb-3"],["mat-dialog-close","",1,"",3,"icon"],[1,"mt-4"],[1,"text-center","pb-4"],[1,"my-3"],["for",""],[1,"text-danger"],[1,"d-flex","col-12","position-relative"],[1,"mt-2",2,"cursor","pointer",3,"click"],[1,"text-muted",2,"font-size","15px","position","absolute","right","1rem",3,"icon"],["name","oldPassword","maxlength","16","placeholder","",1,"form-control","pe-4","pt-2",3,"type","ngModel","keypress","ngModelChange"],["name","newPassword","maxlength","16","placeholder","",1,"form-control","pe-4","pt-2",3,"type","ngModel","keypress","ngModelChange"],[1,"text-danger","mt-3"],[1,"text-end","mt-5"],[1,"btn","btn-success","rounded-pill","me-3",3,"click"],["mat-dialog-close","",1,"btn","btn-danger","rounded-pill"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"fa-icon",1),e.qZA(),e.TgZ(2,"div",2)(3,"form")(4,"h3",3),e._uU(5,"Modification mot de passe"),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Ancien mot de passe "),e.TgZ(9,"sup",6),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"div",7)(12,"i",8),e.NdJ("click",function(){return s.toggleView()}),e._UZ(13,"fa-icon",9),e.qZA(),e.TgZ(14,"input",10),e.NdJ("keypress",function(){return s.onTypingPass()})("ngModelChange",function(l){return s.updatePassword.oldPassword=l}),e.qZA()()(),e.TgZ(15,"div",4)(16,"label",5),e._uU(17,"Nouveau mot de passe "),e.TgZ(18,"sup",6),e._uU(19,"*"),e.qZA()(),e.TgZ(20,"div",7)(21,"i",8),e.NdJ("click",function(){return s.toggleView()}),e._UZ(22,"fa-icon",9),e.qZA(),e.TgZ(23,"input",11),e.NdJ("keypress",function(){return s.onTypingPass()})("ngModelChange",function(l){return s.updatePassword.newPassword=l}),e.qZA()()(),e.TgZ(24,"div",12)(25,"span"),e._uU(26),e.qZA()(),e.TgZ(27,"div",13)(28,"button",14),e.NdJ("click",function(){return s.update()}),e._uU(29," Valider "),e.qZA(),e.TgZ(30,"button",15),e._uU(31," Fermer "),e.qZA()()()()),2&n&&(e.xp6(1),e.Q6J("icon",s.faTimes),e.xp6(12),e.Q6J("icon",s.passView?s.faEyeSlash:s.faEye),e.xp6(1),e.Q6J("type",s.passView?"password":"text")("ngModel",s.updatePassword.oldPassword),e.xp6(8),e.Q6J("icon",s.passView?s.faEyeSlash:s.faEye),e.xp6(1),e.Q6J("type",s.passView?"password":"text")("ngModel",s.updatePassword.newPassword),e.xp6(3),e.Oqu(s.message))},directives:[C.BN,m.ZT,c._Y,c.JL,c.F,c.Fj,c.nD,c.JJ,c.On],styles:[""]}),t})();const P=function(){return{faIcon:!0}},x=function(){return{faIcon:!0,cursorPointer:!0}};let U=(()=>{class t{constructor(n,s,a,l){this.appConfig=n,this.authService=s,this.router=a,this.dialog=l,this.faUser=d.ILF,this.faSearch=d.wn1,this.faCog=d.jLD,this.faBell=d.qmU,this.faHelp=d.Fuz,this.faUsers=d.FVb,this.faBars=d.xiG,this.faLock=d.byT,this.user=this.appConfig.getItemFromSessionStorage("user"),this.prop1=this.appConfig.getItemFromSessionStorage("appModuleRoleResponses")}ngOnInit(){this.getVersion(),this.user=JSON.parse(this.user),this.prop1=JSON.parse(this.prop1)}logOut(){this.appConfig.onDisconnect(),this.router.navigate(["/"])}openUpdatePassword(){this.dialog.open(S,{width:"40%"})}getVersion(){this.appConfig.onStartWaiting(),this.authService.version().subscribe({next:n=>{this.appConfig.onStopWaiting(),this.version=n},error:n=>{this.appConfig.onStopWaiting()}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(f._),e.Y36(M.$),e.Y36(r.F0),e.Y36(m.uw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-header"]],decls:15,vars:12,consts:[[1,"header","d-flex","justify-content-between","align-items-center","mx-2","mt-3"],[1,"btn",2,"border","1px silver solid"],[1,"col-5","d-flex","justify-content-end","align-items-center"],[1,"d-flex","update-password",3,"click"],[1,"me-3"],[3,"icon","ngClass"],[1,"me-5","py-2"],[1,"d-flex","justify-content-center","align-items-center","text-center","pe-3"],[1,"ms-5","me-5","py-2"],[3,"icon","ngClass","click"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e.NdJ("click",function(){return s.openUpdatePassword()}),e.TgZ(5,"div",4),e._UZ(6,"fa-icon",5),e.qZA(),e.TgZ(7,"div",6),e._uU(8," Mot de passe "),e.qZA()(),e.TgZ(9,"div",4)(10,"div",7),e._UZ(11,"fa-icon",5),e._uU(12),e.qZA()(),e.TgZ(13,"div",8)(14,"fa-icon",9),e.NdJ("click",function(){return s.logOut()}),e.qZA()()()()),2&n&&(e.xp6(2),e.hij(" version ",s.version," "),e.xp6(4),e.Q6J("icon",s.faLock)("ngClass",e.DdM(9,P)),e.xp6(5),e.Q6J("icon",s.faUser)("ngClass",e.DdM(10,P)),e.xp6(1),e.AsE("\xa0 \xa0 ",s.user.agent.name," ",s.user.agent.firstName," "),e.xp6(2),e.Q6J("icon",s.faCog)("ngClass",e.DdM(11,x)))},directives:[C.BN,p.mk],styles:[".header[_ngcontent-%COMP%]{background-color:transparent!important;background-color:#f0f8ff;padding:.5%}.header[_ngcontent-%COMP%]   .user-param[_ngcontent-%COMP%]{border:3px solid #348632;background-color:#fff;width:40px;height:40px;border-radius:20px;text-align:center}.header[_ngcontent-%COMP%]   .faIcon[_ngcontent-%COMP%]{font-size:20px}.header[_ngcontent-%COMP%]   .update-password[_ngcontent-%COMP%]:hover{color:#348632;cursor:pointer}.w-80[_ngcontent-%COMP%]{width:82%}.w-87[_ngcontent-%COMP%]{width:87%}"]}),t})();var T=o(1074),A=o(9368),E=o(3833);function N(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"li",4),e.NdJ("click",function(){const l=e.CHM(n).$implicit;return e.oxw(2).startTour(l.key)}),e._uU(1),e.qZA()}if(2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",n.name," ")}}function R(t,i){if(1&t&&(e.TgZ(0,"ul",2),e.YNc(1,N,2,1,"li",3),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.modules)}}let J=(()=>{class t{constructor(n,s,a,l,y){this.appGuideService=n,this.router=s,this.appConfig=a,this.shepherdService=l,this.inAppGuide=y,this.menuVisible=!1,this.modules=[{key:"Core",name:"AU-COLLECTE"},{key:"Recherche",name:"Recherche"}],this.applications=this.appConfig.getItemFromSessionStorage("appModuleRoleResponses")}ngOnInit(){this.applications=JSON.parse(this.applications)}headerGuideTour(){const n=this.getPrivilegesFromApplications(),s=this.inAppGuide.getTourGuideSteps("HomeComponent",n);s.length>0&&(this.inAppGuide.startGuide(s),this.inAppGuide.markGuideAsShown())}getUserPrivileges(){return[...this.applications]}getPrivilegesFromApplications(){return this.applications.map(n=>n.name)}toggleMenu(){this.menuVisible=!this.menuVisible}startTour(n){console.log("Launching tour for module:",n),"Recherche"===n?this.launchRechercheTour():this.launchCoreTour()}launchRechercheTour(){const n=(0,T.wi)(this.shepherdService);this.shepherdService.addSteps(n),this.shepherdService.start()}launchCoreTour(){const n=this.getPrivilegesFromApplications(),s=(0,T.tf)(this.shepherdService,n);console.log("ddddddddddddddd",n),this.shepherdService.addSteps(s),this.shepherdService.start()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(A.g),e.Y36(r.F0),e.Y36(f._),e.Y36(E.a),e.Y36(A.g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-help-button"]],inputs:{tourName:"tourName"},decls:4,vars:1,consts:[["class","help-menu shadow ",4,"ngIf"],[1,"shadow",3,"click"],[1,"help-menu","shadow"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(n,s){1&n&&(e.TgZ(0,"div"),e.YNc(1,R,2,1,"ul",0),e.TgZ(2,"button",1),e.NdJ("click",function(){return s.toggleMenu()}),e._uU(3,"Aide"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("ngIf",s.menuVisible))},directives:[p.O5,p.sg],styles:["button[_ngcontent-%COMP%]{border:none;background-color:#016d3b;color:#fff;height:55px;width:55px;border-radius:100px;cursor:pointer;position:absolute;bottom:0;right:0;margin:10px 50px 10px 10px}button[_ngcontent-%COMP%]:hover{background-color:#06864a}.help-menu[_ngcontent-%COMP%]{list-style-type:none;border-radius:5px;margin:0 30px 70px 0;padding:0;background-color:#016d3b;width:200px;position:absolute;bottom:0;right:0;z-index:50}.help-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#fff;padding:10px;cursor:pointer;border-bottom:1px solid #ddd}.help-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f55948}ul[_ngcontent-%COMP%]{margin-bottom:60px}.list-group[_ngcontent-%COMP%]{background-color:green!important}"]}),t})();const b=[{path:"",component:(()=>{class t{constructor(n){this.router=n,this.dark="true",this.pathObject={paiement:"Paiement",dashboard:"Tableau de Board",reporting:"Reporting",menuExploration:"Menu d'exploration"},this.currentPath="Menu d'exploration",this.version=Z.e.VERSION}ngOnInit(){}getMenu(n){this.currentPath=this.pathObject[n]}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(r.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-app"]],decls:6,vars:0,consts:[[1,"container-main"],[1,"row"],[1,"col-12"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-header")(4,"router-outlet")(5,"app-help-button"),e.qZA()()())},directives:[U,r.lC,J],styles:[".container-main[_ngcontent-%COMP%]{height:100%}.container-main[_ngcontent-%COMP%]   .version-section[_ngcontent-%COMP%]{box-shadow:0 0 4px #0005;border-radius:20px}"]}),t})(),children:[{path:"home",loadChildren:()=>Promise.all([o.e(123),o.e(953)]).then(o.bind(o,6953)).then(t=>t.HomeModule),canActivate:[u.A]},{path:"carte",loadChildren:()=>o.e(387).then(o.bind(o,4387)).then(t=>t.CarteModule),canActivate:[u.A]},{path:"settings-menu",loadChildren:()=>o.e(388).then(o.bind(o,5388)).then(t=>t.SettingsModuleModule),canActivate:[u.A]},{path:"settings/users",loadChildren:()=>Promise.all([o.e(108),o.e(592),o.e(408)]).then(o.bind(o,8408)).then(t=>t.UserModuleModule),canActivate:[u.A]},{path:"settings/config-system",loadChildren:()=>o.e(703).then(o.bind(o,5703)).then(t=>t.SystemModule)},{path:"settings/config-system/config-geographique",loadChildren:()=>Promise.all([o.e(15),o.e(946)]).then(o.bind(o,5015)).then(t=>t.ConfigGeoModule),canActivate:[u.A]},{path:"settings/config-system/organisation",loadChildren:()=>Promise.all([o.e(108),o.e(592),o.e(641)]).then(o.bind(o,8641)).then(t=>t.OrganisationModuleModule)}]}];let F=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[r.Bz.forChild(b)],r.Bz]}),t})(),I=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez]]}),t})(),H=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[I,p.ez,F,C.uH]]}),t})()},8613:(w,h,o)=>{o.d(h,{e:()=>p});var p=(()=>{return(r=p||(p={})).YES="YES",r.VERSION="1.4.5",r.AUCOLLECT="AU-COLLECTE",r.PAIEMENT="PAIEMENT",r.REPORTING="REPORTING",r.LISTER="LISTER",p;var r})()}}]);