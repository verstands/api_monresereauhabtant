"use strict";(self.webpackChunkafricauniontechfront=self.webpackChunkafricauniontechfront||[]).push([[641,946],{8641:(C,_,r)=>{r.r(_),r.d(_,{OrganisationModuleModule:()=>L});var c=r(9808),l=r(1598),s=r(801),Z=r(8261),d=r(8186),t=r(4893),o=r(2846),n=r(2308),f=r(946),h=r(9444);function v(e,p){if(1&e){const i=t.EpF();t.TgZ(0,"tr")(1,"td",9),t._uU(2),t.qZA(),t.TgZ(3,"td",9),t._uU(4),t.qZA(),t.TgZ(5,"td",9),t._uU(6),t.qZA(),t.TgZ(7,"td",9),t._uU(8),t.qZA(),t.TgZ(9,"td",9),t._uU(10),t.qZA(),t.TgZ(11,"td",9)(12,"button",11),t.NdJ("click",function(){const g=t.CHM(i).$implicit;return t.oxw().confirmSuppression(g.id)}),t._UZ(13,"fa-icon",12),t.qZA()()()}if(2&e){const i=p.$implicit,a=p.index,u=t.oxw();t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(i.code?i.code:"-"),t.xp6(2),t.Oqu(i.name),t.xp6(2),t.Oqu(i.description?i.description:"-"),t.xp6(2),t.Oqu(i.status),t.xp6(3),t.Q6J("icon",u.faTrash)}}let E=(()=>{class e{constructor(i,a,u,g){this.appConfig=i,this.dialog=a,this.configService=u,this.router=g,this.faBack=s.acZ,this.faSearch=s.wn1,this.faTrash=s.$aW,this.faEdit=s.Xcf,this.organisations=new Array}ngOnInit(){this.getOrganisationList()}getOrganisationList(){this.appConfig.onStartWaiting(),this.configService.find$("organisation/list").subscribe({next:i=>{this.appConfig.onStopWaiting(),this.organisations=i},error:i=>{this.appConfig.onStopWaiting(),d.H.openInfoDialog(this.dialog,i)}})}deleteOrganisation(i){this.appConfig.onStartWaiting(),this.configService.delete$(`organisation/${i}`).subscribe({next:a=>{this.appConfig.onStopWaiting(),d.H.openInfoDialog(this.dialog,"L'organisation est supprim\xe9 avec succ\xe8s !"),this.getOrganisationList()},error:a=>{this.appConfig.onStopWaiting(),d.H.openInfoDialog(this.dialog,a)}})}confirmSuppression(i){this.dialog.open(Z.$,{disableClose:!0,width:"35%",data:{message:" Voulez-vous vraiment supprimer cette organisation ?"}}).afterClosed().subscribe(a=>{"YES"==a?this.deleteOrganisation(i):this.dialog.closeAll()})}onEdit(i){this.router.navigate(["/app/settings/config-system/organisation/save"],{queryParams:{organisation:JSON.stringify(i)}})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(o._),t.Y36(n.uw),t.Y36(f.E),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-organisation"]],decls:24,vars:2,consts:[[1,"container"],[1,"bg-white","px-4","py-4","mt-3","shadow-custom",2,"border-radius","17px","height","65vh","overflow-y","auto"],[1,"d-flex","justify-content-end","mb-3"],[1,"d-flex","col-sm-4","position-relative"],[1,"mt-2"],[1,"text-muted",2,"font-size","15px","position","absolute","left","1rem",3,"icon"],["type","search","placeholder","Rechercher","aria-label","Search",1,"form-control","ps-5"],[1,"table","mt-4"],[1,"table-audev"],[1,"align-middle"],[4,"ngFor","ngForOf"],[1,"btn","btn-danger",3,"click"],[1,"",3,"icon"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"i",4),t._UZ(5,"fa-icon",5),t.qZA(),t._UZ(6,"input",6),t.qZA()(),t.TgZ(7,"table",7)(8,"thead")(9,"tr",8)(10,"th",9),t._uU(11,"#"),t.qZA(),t.TgZ(12,"th",9),t._uU(13,"code"),t.qZA(),t.TgZ(14,"th",9),t._uU(15,"Nom"),t.qZA(),t.TgZ(16,"th",9),t._uU(17,"Description"),t.qZA(),t.TgZ(18,"th",9),t._uU(19,"Status"),t.qZA(),t.TgZ(20,"th",9),t._uU(21,"Actions"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,v,14,6,"tr",10),t.qZA()()()()),2&i&&(t.xp6(5),t.Q6J("icon",a.faSearch),t.xp6(18),t.Q6J("ngForOf",a.organisations))},directives:[h.BN,c.sg],styles:[""]}),e})();var O=r(655),A=r(2679),R=r(5640);function U(e){return(0,R.Y)({name:"arrayNotEmpty",validator:{validate:(p,i)=>function T(e){return Array.isArray(e)&&e.length>0}(p),defaultMessage:(0,R.l)(p=>p+"$property should not be empty",e)}},e)}class S{}(0,O.gn)([(0,A.rl)({message:"Le code est obligatoire"})],S.prototype,"code",void 0),(0,O.gn)([(0,A.rl)({message:"Le nom est obligatoire"})],S.prototype,"name",void 0),(0,O.gn)([U({message:"L'application est obligatoire "})],S.prototype,"idApplication",void 0),(0,O.gn)([U({message:"La province est obligatoire "})],S.prototype,"idProvince",void 0);var I=r(7111),M=r(9712),m=r(2382);function b(e,p){if(1&e&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&e){const i=p.$implicit;t.Q6J("ngValue",i),t.xp6(1),t.hij(" ",i.name,"")}}function N(e,p){if(1&e&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&e){const i=p.$implicit;t.Q6J("ngValue",i),t.xp6(1),t.Oqu(i.name)}}function D(e,p){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&e){const i=p.$implicit,a=p.index;t.xp6(2),t.Oqu(a+1),t.xp6(2),t.Oqu(i.province),t.xp6(2),t.Oqu(i.application)}}let x=(()=>{class e{constructor(i,a,u,g,w){this.appConfig=i,this.dialog=a,this.config=u,this.router=g,this.route=w,this.faPlus=s.r8p,this.applications=[],this.provinceArray=[],this.applicationArray=[],this.viewArray=[],this.application={},this.province={},this.message="",this.organisation=new S,this.isUpdate=!1}ngOnInit(){this.organisation.idApplication=[],this.organisation.idProvince=[],this.getRegionLists(),this.getApplicationList(),this.ifIsUpdate()}ifIsUpdate(){if(this.route.snapshot.queryParams.organisation){this.isUpdate=!0;const i=JSON.parse(this.route.snapshot.queryParams.organisation);this.organisation.code=i.code,this.organisation.description=i.description,this.organisation.name=i.name}}validation(){this.organisation.idApplication=this.applicationArray,this.organisation.idProvince=this.provinceArray,M.R.controlEntity(this.organisation).then(i=>{this.errors={},this.isUpdate?this.updateOrganisation():this.addOrganisation()}).catch(i=>{this.errors=i})}updateOrganisation(){this.appConfig.onStartWaiting(),this.config.update$(this.organisation,"organisation").subscribe({next:i=>{this.appConfig.onStopWaiting(),this.router.navigate(["/app/settings/config-system/organisation/list"],{replaceUrl:!0}),d.H.openInfoDialog(this.dialog,"Organisation modifi\xe9 avec succ\xe8s",s.f8k)},error:i=>{this.appConfig.onStopWaiting(),d.H.openInfoDialog(this.dialog,i)}})}addOrganisation(){this.appConfig.onStartWaiting(),this.config.save$(this.organisation,"organisation").subscribe({next:i=>{this.appConfig.onStopWaiting(),this.router.navigate(["/app/settings/config-system/organisation/list"],{replaceUrl:!0}),d.H.openInfoDialog(this.dialog,I.G.SAVE_SUCCESS,s.f8k)},error:i=>{this.appConfig.onStopWaiting(),d.H.openInfoDialog(this.dialog,i)}})}getRegionLists(){this.appConfig.onStartWaiting(),this.config.find$("region/list").subscribe({next:i=>{this.appConfig.onStopWaiting(),this.provinces=i},error:i=>{this.appConfig.onStopWaiting(),d.H.openInfoDialog(this.dialog,i)}})}getApplicationList(){this.appConfig.onStartWaiting(),this.config.find$("application/list").subscribe({next:i=>{this.appConfig.onStopWaiting(),this.applications=i},error:i=>{this.appConfig.onStopWaiting(),d.H.openInfoDialog(this.dialog,i)}})}addToArray(){try{if(!this.province.name||this.province.name.length<=0)throw new Error("Veuillez renseigner la province");if(!this.application.name||this.application.name.length<=0)throw new Error("Veuillez renseigner l'application");this.message="",this.viewArray.push({province:this.province.name,application:this.application.name}),this.applicationArray.push(this.application.id),this.provinceArray.push(this.province.id),this.province={},this.application={}}catch(i){this.message=i.message}}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(o._),t.Y36(n.uw),t.Y36(f.E),t.Y36(l.F0),t.Y36(l.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-save"]],decls:72,vars:14,consts:[[1,"row","mb-2"],[1,"col-md-12","p-0","card-white-section","bg-white","p-4",2,"border-radius","17px","height","65vh","overflow-y","auto"],[1,"mt-4","text-center"],[1,"mb-4","row"],[1,"col-sm-8","mt-4"],[1,"row"],[1,"col-md-4","my-2"],[1,"label-form","mb-2"],[1,"text-danger"],["required","","type","text","id","code","name","code","placeholder","Code organisation",1,"form-control",3,"ngModel","ngModelChange"],[1,"my-1","text-danger"],[1,"col-md-6","my-2"],["required","","type","text","id","denomination","name","denomination","placeholder","D\xe9nomination",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-10","my-2"],["type","text","id","description","name","description","placeholder","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-5","my-3"],["for",""],["id","province","name","application",1,"form-select",3,"ngModel","ngModelChange"],["selected","","value","undefined"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"my-2","text-danger"],["id","province","name","province",1,"form-select",3,"ngModel","ngModelChange"],[1,"col-2","mt-2","mb-4"],["type","submit",1,"btn","btn-success","rounded-pill","col-12",3,"click"],[3,"icon"],[1,"col-4","mt-5","pt-3"],[1,"table"],[1,"table-audev"],[4,"ngFor","ngForOf"],[1,"col-12","mt-2"],["type","submit",1,"btn","btn-success","rounded-pill","py-2","px-3",3,"click"],["type","reset",1,"btn","bg-secondary","rounded-pill","ms-3","text-white","py-2","px-3"],[3,"ngValue"]],template:function(i,a){1&i&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h3",2),t._uU(3,"Ajouter une organisation"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Code"),t.TgZ(10,"sup",8),t._uU(11,"*"),t.qZA()(),t.TgZ(12,"input",9),t.NdJ("ngModelChange",function(g){return a.organisation.code=g}),t.qZA(),t.TgZ(13,"div",10),t._uU(14),t.qZA()(),t.TgZ(15,"div",11)(16,"label",7),t._uU(17,"D\xe9nomination"),t.TgZ(18,"sup",8),t._uU(19,"*"),t.qZA()(),t.TgZ(20,"input",12),t.NdJ("ngModelChange",function(g){return a.organisation.name=g}),t.qZA(),t.TgZ(21,"div",10),t._uU(22),t.qZA()()(),t.TgZ(23,"div",13)(24,"label",7),t._uU(25,"Description "),t.qZA(),t.TgZ(26,"textarea",14),t.NdJ("ngModelChange",function(g){return a.organisation.description=g}),t.qZA(),t._UZ(27,"div",10),t.qZA(),t.TgZ(28,"div",5)(29,"div",15)(30,"label",16),t._uU(31,"Application "),t.TgZ(32,"span",8),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"select",17),t.NdJ("ngModelChange",function(g){return a.application=g}),t.TgZ(35,"option",18),t._uU(36,"s\xe9lectionner une application"),t.qZA(),t.YNc(37,b,2,2,"option",19),t.qZA(),t.TgZ(38,"p",20),t._uU(39),t.qZA()(),t.TgZ(40,"div",15)(41,"label",16),t._uU(42,"Province "),t.TgZ(43,"span",8),t._uU(44,"*"),t.qZA()(),t.TgZ(45,"select",21),t.NdJ("ngModelChange",function(g){return a.province=g}),t.TgZ(46,"option",18),t._uU(47,"s\xe9lectionner une province"),t.qZA(),t.YNc(48,N,2,2,"option",19),t.qZA(),t.TgZ(49,"p",20),t._uU(50),t.qZA()()(),t.TgZ(51,"div",22)(52,"button",23),t.NdJ("click",function(){return a.addToArray()}),t._UZ(53,"fa-icon",24),t._uU(54," Ajouter "),t.qZA()()(),t.TgZ(55,"div",25)(56,"table",26)(57,"thead")(58,"tr",27)(59,"th"),t._uU(60,"#"),t.qZA(),t.TgZ(61,"th"),t._uU(62,"Province"),t.qZA(),t.TgZ(63,"th"),t._uU(64,"Application"),t.qZA()()(),t.TgZ(65,"tbody"),t.YNc(66,D,7,3,"tr",28),t.qZA()()()(),t.TgZ(67,"div",29)(68,"button",30),t.NdJ("click",function(){return a.validation()}),t._uU(69),t.qZA(),t.TgZ(70,"button",31),t._uU(71," R\xe9initialiser "),t.qZA()()()()),2&i&&(t.xp6(12),t.Q6J("ngModel",a.organisation.code),t.xp6(2),t.hij(" ",a.errors?a.errors.code:""," "),t.xp6(6),t.Q6J("ngModel",a.organisation.name),t.xp6(2),t.hij(" ",a.errors?a.errors.name:""," "),t.xp6(4),t.Q6J("ngModel",a.organisation.description),t.xp6(8),t.Q6J("ngModel",a.application),t.xp6(3),t.Q6J("ngForOf",a.applications),t.xp6(2),t.hij(" ",a.errors?a.errors.idApplication:""," "),t.xp6(6),t.Q6J("ngModel",a.province),t.xp6(3),t.Q6J("ngForOf",a.provinces),t.xp6(2),t.hij(" ",a.errors?a.errors.idProvince:""," "),t.xp6(3),t.Q6J("icon",a.faPlus),t.xp6(13),t.Q6J("ngForOf",a.viewArray),t.xp6(3),t.hij(" ",!1===a.isUpdate?"Enregistrer":"Modifier"," "))},directives:[m._Y,m.JL,m.F,m.Fj,m.Q7,m.JJ,m.On,m.EJ,m.YN,m.Kr,c.sg,h.BN],styles:[""]}),e})();const P=function(){return["/app/settings/config-system"]},W=function(){return["/app/settings/config-system/organisation/list"]},q=function(){return["/app/settings/config-system/organisation/save"]},G=[{path:"",component:(()=>{class e{constructor(){this.faBack=s.acZ}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-organisation-module"]],decls:15,vars:7,consts:[[1,"container","mb-1"],[1,"btn","btn-secondary","rounded-pill","mx-2","p-2","ms-0",3,"routerLink"],[1,"text-white",3,"icon"],[1,"text-center"],["src","/assets/organisation.png","alt","","width","30","height","30",1,"cover-img","rounded-circle"],[1,"container","mt-4","px-0"],[1,"d-flex","justify-content-center","align-items-center","mb-3"],["routerLinkActive","active",1,"btn","btn-outline-success","rounded-pill","py-3","col-lg-2","col-2","ms-md-3","me-2",3,"routerLink"],[1,"container","pt-2","my-4","marge-bottom","px-0"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"button",1),t._UZ(2,"fa-icon",2),t._uU(3," Retour "),t.qZA(),t.TgZ(4,"h3",3),t._UZ(5,"img",4),t._uU(6," ORGANISATION "),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"button",7),t._uU(10," Liste des organisations "),t.qZA(),t.TgZ(11,"button",7),t._uU(12," Ajouter une organisation "),t.qZA()(),t.TgZ(13,"div",8),t._UZ(14,"router-outlet"),t.qZA()()),2&i&&(t.xp6(1),t.Q6J("routerLink",t.DdM(4,P)),t.xp6(1),t.Q6J("icon",a.faBack),t.xp6(7),t.Q6J("routerLink",t.DdM(5,W)),t.xp6(2),t.Q6J("routerLink",t.DdM(6,q)))},directives:[l.rH,h.BN,l.Od,l.lC],styles:[""]}),e})(),children:[{path:"list",component:E},{path:"save",component:x}]}];let J=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(G)],l.Bz]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,J,m.u5,h.uH]]}),e})()},7957:(C,_,r)=>{r.d(_,{_:()=>Z});var c=r(262),l=r(4004),s=r(7111);class Z{constructor(t,o,n,f){this._http=t,this._base=o,this._router=n,this._dialog=f}intercept(t,o){const n=localStorage.getItem("browser"),f=localStorage.getItem("os"),h=localStorage.getItem("ipAddress"),v=localStorage.getItem("longitude"),E=localStorage.getItem("latitude"),O=localStorage.getItem("Isp"),A=localStorage.getItem("City"),R=localStorage.getItem("Country"),y=t.clone({setHeaders:{Browser:n||"",OS:f||"","IP-Address":h||"",Longitude:v||"",Latitude:E||"",Isp:O||"",City:A||"",Country:R||""}});return console.log("ddd :",f),o.handle(y).pipe((0,c.K)(T=>{throw 0!==T.status||401!==T.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR}))}putFind$(t){return this._http.put(this._base+`/${t}`,"").pipe((0,l.U)(o=>{if("400"==o.status.code)throw o.status.message;if("500"==o.status.code)throw s.G.NETWORK_ERROR;if("401"==o.status.code)throw s.G.SESSION_EXPIRED;return o.response}),(0,c.K)(o=>{throw"string"!=typeof o?0==o.status||200==o.status||401==o.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR:o}))}postFind$(t){return this._http.post(this._base+`/${t}`,"").pipe((0,l.U)(o=>{if("400"==o.status.code)throw o.status.message;if("500"==o.status.code)throw s.G.NETWORK_ERROR;if("401"==o.status.code)throw s.G.SESSION_EXPIRED;return o.response}),(0,c.K)(o=>{throw"string"!=typeof o?0==o.status||200==o.status||401==o.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR:o}))}find$(t){return this._http.get(this._base+`/${t}`).pipe((0,l.U)(o=>{switch(o.status.code){case"400":case"":default:throw o.status.message;case"500":throw s.G.NETWORK_ERROR;case"401":throw s.G.SESSION_EXPIRED;case"200":return o.response}}),(0,c.K)(o=>{throw"string"!=typeof o?0==o.status||200==o.status||401==o.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR:o}))}save$(t,o){return this._http.post(this._base+`/${o}`,t).pipe((0,l.U)(n=>{switch(n.status.code){case"400":case"":case"418":default:throw n.status.message;case"500":throw s.G.NETWORK_ERROR;case"401":throw s.G.SESSION_EXPIRED;case"200":return n.response}}),(0,c.K)(n=>{throw"string"!=typeof n?0==n.status||200==n.status||401==n.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR:n}))}update$(t,o){return this._http.put(this._base+`/${o}`,t).pipe((0,l.U)(n=>{switch(n.status.code){case"400":case"":default:throw n.status.message;case"500":throw s.G.NETWORK_ERROR;case"401":throw s.G.SESSION_EXPIRED;case"200":return n.response}}),(0,c.K)(n=>{throw"string"!=typeof n?0==n.status||200==n.status||401==n.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR:n}))}delete$(t){return this._http.delete(this._base+`/${t}`).pipe((0,l.U)(o=>{switch(o.status.code){case"400":case"":default:throw o.status.message;case"500":throw s.G.NETWORK_ERROR;case"401":throw s.G.SESSION_EXPIRED;case"200":return o.response}}),(0,c.K)(o=>{throw"string"!=typeof o?0==o.status||200==o.status||401==o.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR:o}))}patch$(t,o){return this._http.patch(this._base+`/${o}`,t).pipe((0,l.U)(n=>{switch(n.status.code){case"400":case"":default:throw n.status.message;case"500":throw s.G.NETWORK_ERROR;case"401":throw s.G.SESSION_EXPIRED;case"200":return n.response}}),(0,c.K)(n=>{throw"string"!=typeof n?0==n.status?(this._router.navigate(["/login"],{replaceUrl:!0}),this._dialog.closeAll(),s.G.SESSION_EXPIRED):s.G.NETWORK_ERROR:n}))}}},946:(C,_,r)=>{r.d(_,{E:()=>o});var c=r(2340),l=r(7957),s=r(4893),Z=r(520),d=r(1598),t=r(2308);let o=(()=>{class n extends l._{constructor(h,v,E){super(h,`${c.N.baseUrl}/config`,v,E),this._http=h,this._router=v,this._dialog=E}}return n.\u0275fac=function(h){return new(h||n)(s.LFG(Z.eN),s.LFG(d.F0),s.LFG(t.uw))},n.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);